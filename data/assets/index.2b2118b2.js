(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function _(){}function H(t){return t()}function T(){return Object.create(null)}function C(t){t.forEach(H)}function Q(t){return typeof t=="function"}function P(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function R(t){return Object.keys(t).length===0}function v(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function V(t){return document.createTextNode(t)}function b(){return V(" ")}function X(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function O(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Y(t){return Array.from(t.childNodes)}let w;function y(t){w=t}function Z(){if(!w)throw new Error("Function called outside component initialization");return w}function tt(t){Z().$$.on_mount.push(t)}const x=[],N=[],$=[],F=[],et=Promise.resolve();let B=!1;function nt(){B||(B=!0,et.then(z))}function D(t){$.push(t)}const j=new Set;let L=0;function z(){const t=w;do{for(;L<x.length;){const e=x[L];L++,y(e),st(e.$$)}for(y(null),x.length=0,L=0;N.length;)N.pop()();for(let e=0;e<$.length;e+=1){const n=$[e];j.has(n)||(j.add(n),n())}$.length=0}while(x.length);for(;F.length;)F.pop()();B=!1,j.clear(),y(t)}function st(t){if(t.fragment!==null){t.update(),C(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const S=new Set;let ot;function I(t,e){t&&t.i&&(S.delete(t),t.i(e))}function lt(t,e,n,s){if(t&&t.o){if(S.has(t))return;S.add(t),ot.c.push(()=>{S.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function rt(t){t&&t.c()}function J(t,e,n,s){const{fragment:o,on_mount:i,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),s||D(()=>{const f=i.map(H).filter(Q);c?c.push(...f):C(f),t.$$.on_mount=[]}),u.forEach(D)}function K(t,e){const n=t.$$;n.fragment!==null&&(C(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function at(t,e){t.$$.dirty[0]===-1&&(x.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,s,o,i,c,u=[-1]){const f=w;y(t);const a=t.$$={fragment:null,ctx:null,props:i,update:_,not_equal:o,bound:T(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:T(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};c&&c(a.root);let r=!1;if(a.ctx=n?n(t,e.props||{},(l,d,...g)=>{const m=g.length?g[0]:d;return a.ctx&&o(a.ctx[l],a.ctx[l]=m)&&(!a.skip_bound&&a.bound[l]&&a.bound[l](m),r&&at(t,l)),d}):[],a.update(),r=!0,C(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const l=Y(e.target);a.fragment&&a.fragment.l(l),l.forEach(k)}else a.fragment&&a.fragment.c();e.intro&&I(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),z()}y(f)}class W{$destroy(){K(this,1),this.$destroy=_}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!R(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function it(t){let e;return{c(){e=p("main"),e.innerHTML=`<ul class="water-level-container svelte-13uavxd"><li class="water-bottle svelte-13uavxd"><div class="cap svelte-13uavxd"><div class="cap-top svelte-13uavxd"></div> 
            <div class="cap-seal svelte-13uavxd"></div></div> 
          <div class="bottle bottle-1 svelte-13uavxd"><div id="lvl" class="water-low svelte-13uavxd"></div></div></li> 
  
        <li class="water-bottle svelte-13uavxd"><div class="cap svelte-13uavxd"><div class="cap-top svelte-13uavxd"></div> 
            <div class="cap-seal svelte-13uavxd"></div></div> 
          <div class="bottle bottle-2 svelte-13uavxd"><div id="lvl" class="water-medium  svelte-13uavxd"></div></div></li> 
  
        <li class="water-bottle svelte-13uavxd"><div class="cap svelte-13uavxd"><div class="cap-top svelte-13uavxd"></div> 
            <div class="cap-seal svelte-13uavxd"></div></div> 
          <div class="bottle bottle-3 svelte-13uavxd"><div id="lvl" class="water-mid-full svelte-13uavxd"></div></div></li> 
  
        <li class="water-bottle svelte-13uavxd"><div class="cap svelte-13uavxd"><div class="cap-top svelte-13uavxd"></div> 
            <div class="cap-seal svelte-13uavxd"></div></div> 
          <div class="bottle bottle-4 svelte-13uavxd"><div id="lvl" class="water-full svelte-13uavxd"></div></div></li></ul>`},m(n,s){q(n,e,s)},p:_,i:_,o:_,d(n){n&&k(e)}}}class ct extends W{constructor(e){super(),U(this,e,null,it,P,{})}}function ut(t){let e,n,s,o,i,c,u,f,a,r,l,d,g,m,E,A,M;return d=new ct({}),{c(){e=p("main"),n=p("h1"),n.textContent="Casa Kombi Amora",s=b(),o=p("p"),o.textContent="DUCHA",i=b(),c=p("p"),u=p("button"),u.textContent="Ligar",f=b(),a=p("div"),r=p("span"),r.textContent="Caixa do Banho",l=b(),rt(d.$$.fragment),g=b(),m=p("p"),m.innerHTML=`<a href="/update"><button class="button">Update OTA</button></a> 
    <a href="/edit"><button class="button">Edit Files</button></a> 
    <a href="/webserial"><button class="button">WebSerial</button></a>`,O(u,"id","btn_shower"),O(u,"class","button"),O(r,"class","sensor-labels svelte-tazeyg")},m(h,G){q(h,e,G),v(e,n),v(e,s),v(e,o),v(e,i),v(e,c),v(c,u),t[2](u),v(e,f),v(e,a),v(a,r),v(a,l),J(d,a,null),v(a,g),v(a,m),E=!0,A||(M=X(u,"click",t[1]),A=!0)},p:_,i(h){E||(I(d.$$.fragment,h),E=!0)},o(h){lt(d.$$.fragment,h),E=!1},d(h){h&&k(e),t[2](null),K(d),A=!1,M()}}}function dt(t){const e=document.querySelectorAll("#lvl");for(let n=t.length-1;n>=0;n--)t[n]===1?e[n].classList.add("water-selected"):e[n].classList.remove("water-selected")}function ft(t,e,n){let s,o="0";function i(){if(console.log("clickShower shower_status",o),n(0,s.textContent="Carregando...",s),n(0,s.ariaDisabled=!0,s),o){let r=o=="0"?"1":"0";console.log("send_status",r),u("Enviando...",!1),fetch(`/shower?p=${r}`).then(l=>l.json()).then(l=>{}).catch(l=>{console.log(l),n(0,s.textContent="Erro!",s)}).finally(()=>n(0,s.ariaDisabled=!1,s))}}function c(r=!0){u(r?"Ligar":"Desligar",!1),r?s.classList.remove("button2"):s.classList.add("button2")}function u(r,l=!1){r!=null&&n(0,s.textContent=r,s),n(0,s.ariaDisabled=l,s)}function f(r){o=r,u(r==1?"Desligar":"Ligar",!1),c(r!=1)}tt(()=>{if(window.EventSource){var r=new EventSource("/events");r.addEventListener("open",function(l){console.log("Events Connected")},!1),r.addEventListener("error",function(l){l.target.readyState!=EventSource.OPEN&&console.log("Events Disconnected")},!1),r.addEventListener("shower_box",function(l){console.log("shower_box",l.data);const d=JSON.parse(l.data);dt(d.cx1)},!1),r.addEventListener("shower_status",function(l){console.log("shower_status",l.data),f(l.data)},!1),r.addEventListener("controller_status",function(l){try{const d=JSON.parse(l.data);console.log("controller_status obj:",d)}catch{console.log("error with controller_status:",l.data)}},!1),r.addEventListener("time",function(l){console.log("date time: ",l.data)},!1)}});function a(r){N[r?"unshift":"push"](()=>{s=r,n(0,s)})}return[s,i,a]}class vt extends W{constructor(e){super(),U(this,e,ft,ut,P,{})}}new vt({target:document.getElementById("app")});
